{"version":3,"sources":["webpack:///webpack/bootstrap f52fd4371f30e7eec2ea","webpack:///external \"path\"","webpack:///external \"express\"","webpack:///external \"child_process\"","webpack:///./bin/www","webpack:///./app.js","webpack:///external \"http-errors\"","webpack:///external \"cookie-parser\"","webpack:///external \"morgan\"","webpack:///./routes/index.js","webpack:///external \"multer\"","webpack:///external \"fs-extra\"","webpack:///external \"debug\"","webpack:///external \"http\"","webpack:///./public/javascripts/socket.js","webpack:///external \"socket.io\"","webpack:///external \"zip-folder\""],"names":["createError","require","express","path","cookieParser","logger","indexRouter","app","set","join","__dirname","use","json","urlencoded","extended","static","req","res","next","header","err","locals","message","error","get","status","render","module","exports","multer","upload","dest","fs","exec","send","post","single","file","renameSync","resolve","filename","mkdirSync","download","params","remove","socketio","zipFolder","listen","io","on","socket","cwd","stdout","stderr","emit","packagesJson","packages","JSON","parse","totalSize","passed","item","package","Number","length"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,iC;;;;;;ACAA,oC;;;;;;ACAA,0C;;;;;;ACAA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/FA,qDAAIA,cAAc,mBAAAC,CAAQ,CAAR,CAAlB;AACA,IAAIC,UAAU,mBAAAD,CAAQ,CAAR,CAAd;AACA,IAAIE,OAAO,mBAAAF,CAAQ,CAAR,CAAX;AACA,IAAIG,eAAe,mBAAAH,CAAQ,CAAR,CAAnB;AACA,IAAII,SAAS,mBAAAJ,CAAQ,CAAR,CAAb;;AAEA,IAAIK,cAAc,mBAAAL,CAAQ,CAAR,CAAlB;;AAEA,IAAIM,MAAML,SAAV;;AAEA;AACAK,IAAIC,GAAJ,CAAQ,OAAR,EAAiBL,KAAKM,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAH,IAAIC,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;;AAEAD,IAAII,GAAJ,CAAQN,OAAO,KAAP,CAAR;AACAE,IAAII,GAAJ,CAAQT,QAAQU,IAAR,EAAR;AACAL,IAAII,GAAJ,CAAQT,QAAQW,UAAR,CAAmB,EAAEC,UAAU,KAAZ,EAAnB,CAAR;AACAP,IAAII,GAAJ,CAAQP,cAAR;AACAG,IAAII,GAAJ,CAAQT,QAAQa,MAAR,CAAeZ,KAAKM,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;;AAEAH,IAAII,GAAJ,CAAQ,UAASK,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC/BD,MAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,MAAIE,MAAJ,CAAW,8BAAX,EAA2C,gDAA3C;AACAD;AACD,CAJD;;AAOAX,IAAII,GAAJ,CAAQ,GAAR,EAAaL,WAAb;;AAEA;AACAC,IAAII,GAAJ,CAAQ,UAASK,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC/BA,OAAKlB,YAAY,GAAZ,CAAL;AACD,CAFD;;AAIA;AACAO,IAAII,GAAJ,CAAQ,UAASS,GAAT,EAAcJ,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AACpC;AACAD,MAAII,MAAJ,CAAWC,OAAX,GAAqBF,IAAIE,OAAzB;AACAL,MAAII,MAAJ,CAAWE,KAAX,GAAmBP,IAAIT,GAAJ,CAAQiB,GAAR,CAAY,KAAZ,MAAuB,aAAvB,GAAuCJ,GAAvC,GAA6C,EAAhE;;AAEA;AACAH,MAAIQ,MAAJ,CAAWL,IAAIK,MAAJ,IAAc,GAAzB;AACAR,MAAIS,MAAJ,CAAW,OAAX;AACD,CARD;;AAUAC,OAAOC,OAAP,GAAiBrB,GAAjB,C;;;;;;;AC7CA,wC;;;;;;ACAA,0C;;;;;;ACAA,mC;;;;;;ACAA,IAAIL,UAAU,mBAAAD,CAAQ,CAAR,CAAd;AACA,IAAI4B,SAAS,mBAAA5B,CAAQ,CAAR,CAAb;AACA,IAAI6B,SAASD,OAAO,EAAEE,MAAM,UAAR,EAAP,CAAb;AACA,IAAI5B,OAAO,mBAAAF,CAAQ,CAAR,CAAX;AACA,IAAI+B,KAAK,mBAAA/B,CAAQ,EAAR,CAAT;AACA,MAAM,EAAEgC,IAAF,KAAW,mBAAAhC,CAAQ,CAAR,CAAjB;;AAEA,IAAIM,MAAML,SAAV;;AAEA;AACAK,IAAIiB,GAAJ,CAAQ,GAAR,EAAa,UAAUR,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACrCD,MAAIiB,IAAJ,CAAS,YAAT;AACD,CAFD;;AAIA3B,IAAI4B,IAAJ,CAAS,SAAT,EAAoBL,OAAOM,MAAP,CAAc,MAAd,CAApB,EAA2C,UAAUpB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;;AAGnE,MAAI,CAACF,IAAIqB,IAAT,EAAe;AACbpB,QAAIiB,IAAJ,CAAS,oBAAT;AACA;AACD;AACDF,KAAGM,UAAH,CAAcnC,KAAKoC,OAAL,CAAc,WAAUvB,IAAIqB,IAAJ,CAASG,QAAS,EAA1C,CAAd,EAA4DrC,KAAKoC,OAAL,CAAa,sBAAb,CAA5D;AACAP,KAAGS,SAAH,CAAatC,KAAKoC,OAAL,CAAc,WAAUvB,IAAIqB,IAAJ,CAASG,QAAS,EAA1C,CAAb;AACAR,KAAGM,UAAH,CAAcnC,KAAKoC,OAAL,CAAa,sBAAb,CAAd,EAAoDpC,KAAKoC,OAAL,CAAc,WAAUvB,IAAIqB,IAAJ,CAASG,QAAS,eAA1C,CAApD;;AAEA,SAAOvB,IAAIiB,IAAJ,CAASlB,IAAIqB,IAAJ,CAASG,QAAlB,CAAP;AAED,CAbD;;AAeAjC,IAAIiB,GAAJ,CAAQ,qBAAR,EAA+B,UAAUR,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;;AAEvDD,MAAIyB,QAAJ,CAAavC,KAAKoC,OAAL,CAAc,WAAUvB,IAAI2B,MAAJ,CAAWH,QAAS,mBAA5C,CAAb,EAA8E,kBAA9E,EAAkG,UAAUpB,GAAV,EAAe;AAC/G,QAAIA,GAAJ,EAAS;AACP;AACA;AACD,KAHD,MAGO;AACLY,SAAGY,MAAH,CAAUzC,KAAKoC,OAAL,CAAc,WAAUvB,IAAI2B,MAAJ,CAAWH,QAAS,EAA5C,CAAV,EAA0D,YAAY,CACrE,CADD;AAED;AACF,GARD;AASD,CAXD;;AAcAb,OAAOC,OAAP,GAAiBrB,GAAjB,C;;;;;;AC3CA,mC;;;;;;ACAA,qC;;;;;;ACAA,kC;;;;;;ACAA,iC;;;;;;ACAA,IAAIsC,WAAW,mBAAA5C,CAAQ,EAAR,CAAf;AACA,IAAI6C,YAAY,mBAAA7C,CAAQ,EAAR,CAAhB;AACA,MAAM,EAAEgC,IAAF,KAAW,mBAAAhC,CAAQ,CAAR,CAAjB;AACA,IAAIE,OAAO,mBAAAF,CAAQ,CAAR,CAAX;;AAEA0B,OAAOC,OAAP,CAAemB,MAAf,GAAwB,UAAUxC,GAAV,EAAe;AACnCyC,SAAKH,SAASE,MAAT,CAAgBxC,GAAhB,CAAL;;AAEAyC,OAAGC,EAAH,CAAM,YAAN,EAAoB,UAAUC,MAAV,EAAkB;;AAElCA,eAAOD,EAAP,CAAU,eAAV,EAA2B,UAAUT,QAAV,EAAoB;;AAE3CP,iBAAK,aAAL,EAAoB,EAAEkB,KAAKhD,KAAKoC,OAAL,CAAc,WAAUC,QAAS,EAAjC,CAAP,EAApB,EAAkE,CAACjB,KAAD,EAAQ6B,MAAR,EAAgBC,MAAhB,KAA2B;;AAEzF,oBAAI9B,KAAJ,EAAW;AACP2B,2BAAOI,IAAP,CAAY,WAAZ,EAAyB/B,KAAzB;AACH;;AAED2B,uBAAOI,IAAP,CAAY,WAAZ,EAAyB,CAAzB;;AAEAR,0BAAU3C,KAAKoC,OAAL,CAAc,WAAUC,QAAS,eAAjC,CAAV,EAA4DrC,KAAKoC,OAAL,CAAc,WAAUC,QAAS,mBAAjC,CAA5D,EAAkH,UAAUpB,GAAV,EAAe;AAC7H,wBAAIA,GAAJ,EAAS;AACL8B,+BAAOI,IAAP,CAAY,QAAZ,EAAsB,CAAC,CAAvB;AACA;AACH,qBAHD,MAGO;AACHJ,+BAAOI,IAAP,CAAY,QAAZ,EAAsBd,QAAtB;AACA;AACH;AACJ,iBARD;AAUH,aAlBD;AAoBH,SAtBD;;AAyBAU,eAAOD,EAAP,CAAU,SAAV,EAAqB,UAAUM,YAAV,EAAwB;;AAEzC,gBAAIC,WAAWC,KAAKC,KAAL,CAAWH,YAAX,CAAf;AACA,gBAAII,YAAY,CAAhB;AACA,gBAAIC,SAAS,CAAb;;AAEA,iBAAK,IAAIC,IAAT,IAAiBL,QAAjB,EAA2B;AACvBvB,qBAAM,oBAAmB4B,KAAKC,OAAQ,EAAtC,EAAyC,CAACvC,KAAD,EAAQ6B,MAAR,EAAgBC,MAAhB,KAA2B;AAChEM,iCAAaI,OAAOX,MAAP,CAAb;AACAQ;AACA,wBAAIA,WAAWJ,SAASQ,MAAxB,EAAgCd,OAAOI,IAAP,CAAY,aAAZ,EAA2BK,SAA3B;AAEnC,iBALD;AAMH;AAEJ,SAfD;AAmBH,KA9CD;;AAgDA,WAAOX,EAAP;AACH,CApDD,C;;;;;;ACLA,sC;;;;;;ACAA,uC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f52fd4371f30e7eec2ea","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 2\n// module chunks = 0","/**\n * Module dependencies.\n */\n\nvar app = require('../app');\nvar debug = require('debug')('server:server');\nvar http = require('http');\n\n/**\n * Get port from environment and store in Express.\n */\n\nvar port = normalizePort(process.env.PORT || '3030');\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\n\nvar server = http.createServer(app);\n\n//SOCKET.IO\n\nvar io = require('../public/javascripts/socket').listen(server)\n\n\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\n\n\nserver.listen(port);\nserver.on('error', onError);\nserver.on('listening', onListening);\n\n/**\n * Normalize a port into a number, string, or false.\n */\n\nfunction normalizePort(val) {\n  var port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    // named pipe\n    return val;\n  }\n\n  if (port >= 0) {\n    // port number\n    return port;\n  }\n\n  return false;\n}\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  var bind = typeof port === 'string'\n    ? 'Pipe ' + port\n    : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\n\nfunction onListening() {\n  var addr = server.address();\n  var bind = typeof addr === 'string'\n    ? 'pipe ' + addr\n    : 'port ' + addr.port;\n  debug('Listening on ' + bind);\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./bin/www\n// module id = 3\n// module chunks = 0","var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use(function(req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\n  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n  next();\n});\n\n\napp.use('/', indexRouter);\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n  next(createError(404));\n});\n\n// error handler\napp.use(function(err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./app.js","module.exports = require(\"http-errors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http-errors\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 7\n// module chunks = 0","var express = require('express');\nvar multer = require('multer');\nvar upload = multer({ dest: 'uploads/' })\nvar path = require('path');\nvar fs = require('fs-extra')\nconst { exec } = require('child_process');\n\nvar app = express()\n\n/* GET home page. */\napp.get('/', function (req, res, next) {\n  res.send('wsh aloors')\n});\n\napp.post('/upload', upload.single('file'), function (req, res, next) {\n\n\n  if (!req.file) {\n    res.send(\"File was not found\");\n    return;\n  }\n  fs.renameSync(path.resolve(`uploads/${req.file.filename}`), path.resolve('uploads/package.json'))\n  fs.mkdirSync(path.resolve(`uploads/${req.file.filename}`))\n  fs.renameSync(path.resolve('uploads/package.json'), path.resolve(`uploads/${req.file.filename}/package.json`))\n\n  return res.send(req.file.filename);\n\n});\n\napp.get('/download/:filename', function (req, res, next) {\n\n  res.download(path.resolve(`uploads/${req.params.filename}/node_modules.zip`), 'node_modules.zip', function (err) {\n    if (err) {\n      // Handle error, but keep in mind the response may be partially-sent\n      // so check res.headersSent\n    } else {\n      fs.remove(path.resolve(`uploads/${req.params.filename}`), function () {\n      });\n    }\n  });\n});\n\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/index.js","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 12\n// module chunks = 0","var socketio = require('socket.io')\r\nvar zipFolder = require('zip-folder');\r\nconst { exec } = require('child_process');\r\nvar path = require('path');\r\n\r\nmodule.exports.listen = function (app) {\r\n    io = socketio.listen(app)\r\n\r\n    io.on('connection', function (socket) {\r\n\r\n        socket.on('createPackage', function (filename) {\r\n\r\n            exec('npm install', { cwd: path.resolve(`uploads/${filename}`) }, (error, stdout, stderr) => {\r\n\r\n                if (error) {\r\n                    socket.emit(\"generated\", error);\r\n                }\r\n\r\n                socket.emit(\"generated\", 0);\r\n\r\n                zipFolder(path.resolve(`uploads/${filename}/node_modules`), path.resolve(`uploads/${filename}/node_modules.zip`), function (err) {\r\n                    if (err) {\r\n                        socket.emit(\"zipped\", -1);\r\n                        return;\r\n                    } else {\r\n                        socket.emit(\"zipped\", filename);\r\n                        return;\r\n                    }\r\n                });\r\n\r\n            });\r\n\r\n        })\r\n\r\n\r\n        socket.on('getSize', function (packagesJson) {\r\n\r\n            var packages = JSON.parse(packagesJson);\r\n            var totalSize = 0;\r\n            var passed = 0;\r\n\r\n            for (let item of packages) {\r\n                exec(`bundle-phobia -s ${item.package}`, (error, stdout, stderr) => {\r\n                    totalSize += Number(stdout);\r\n                    passed++;\r\n                    if (passed === packages.length) socket.emit(\"receiveSize\", totalSize);\r\n\r\n                })\r\n            }\r\n\r\n        })\r\n\r\n\r\n\r\n    })\r\n\r\n    return io\r\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/socket.js","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"zip-folder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"zip-folder\"\n// module id = 15\n// module chunks = 0"],"sourceRoot":""}